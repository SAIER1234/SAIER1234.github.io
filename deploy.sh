#!/bin/bash

# 1. ç¡®ä¿åœ¨ source åˆ†æ”¯
git checkout source

# 2. æ£€æŸ¥æ˜¯å¦æœ‰ commit ä¿¡æ¯ä¼ å…¥
if [ -z "$1" ]
then
    message="site update $(date +'%Y-%m-%d %H:%M:%S')"
else
    message="$1"
fi

echo "---------------------------------------"
echo "ğŸš€ å¼€å§‹å‘å¸ƒé™æ€ç½‘é¡µåˆ° GitHub Pages..."
echo "---------------------------------------"

# 3. æ‰§è¡Œ Hexo éƒ¨ç½²è¿æ‹›
hexo clean && hexo g && hexo d

echo "---------------------------------------"
echo "ğŸ“¦ å¼€å§‹å¤‡ä»½æºç åˆ° source åˆ†æ”¯..."
echo "---------------------------------------"

# 4. æ‰§è¡Œ Git æºç å¤‡ä»½
git add .
git commit -m "$message"
git push origin source

echo "---------------------------------------"
echo "âœ¨ å…¨éƒ¨å®Œæˆï¼ä½ çš„åšå®¢å·²ä¸Šçº¿ä¸”æºç å·²åŒæ­¥ã€‚"
echo "---------------------------------------"